{"version":3,"sources":["../../node_modules/@angular/core/esm5 lazy","../../src lazy","../../src/pages/home/home.ts","../../src/providers/utils/strings.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/app/app.component.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 110;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/esm5 lazy\n// module id = 110\n// module chunks = 0","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 151;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 151\n// module chunks = 0","import {Component, NgZone, ViewChild} from '@angular/core';\nimport {Content, NavController, ToastController} from 'ionic-angular';\nimport {TextToSpeech} from '@ionic-native/text-to-speech';\nimport {NativeStorage} from '@ionic-native/native-storage';\nimport {StringUtils} from \"../../providers/utils/strings\";\nimport * as _ from \"lodash\";\n\ndeclare const window;\n\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html'\n})\n\nexport class HomePage {\n\n  @ViewChild('content') private content: Content;\n\n  messages: any[] = [];\n  text: string = \"\";\n  volume: boolean = true;\n  recording: boolean = false;\n\n  constructor(public navCtrl: NavController, private ngZone: NgZone, private tts: TextToSpeech,\n              private toastCtrl: ToastController, private storage: NativeStorage) {\n    let start = \"Hi! How can I help you?\";\n    this.pushMessage(start, 'api');\n    this.initSpeak(start);\n    this.initMic();\n  }\n\n  private presentToast(text, position='bottom', duration=1500) {\n    this.toastCtrl.create({\n      message: text,\n      duration: duration,\n      position: position\n    }).present();\n  }\n\n  private initMic() {\n    window[\"ApiAIPlugin\"].setListeningStartCallback(() => this.recording = true);\n    window[\"ApiAIPlugin\"].setListeningFinishCallback(() => this.recording = false);\n  }\n\n  private initSpeak(text) {\n    this.storage.getItem('volume').then(volume => {\n      this.volume = volume;\n      this.speak(text);\n    }, (error) => this.speak(text));\n  }\n\n  private pushMessage(text, sender) {\n    this.messages.push({\n      text: text,\n      sender: sender\n    });\n  }\n\n  showMessage(text, sender='me') {\n    if (text) {\n      this.ngZone.run(() => {\n        this.pushMessage(text, sender);\n      });\n      this.content.scrollToBottom(200);\n    }\n  }\n\n  showApiMessage(response) {\n    let speech = response.result.fulfillment.speech;\n    let message = _.get(response.result.fulfillment, \"data.google.richResponse.items[0].simpleResponse.displayText\", speech);\n    this.showMessage(message, 'api');\n    this.speak(speech)\n  }\n\n  speak(text) {\n    if (this.volume && text) {\n      this.tts.speak({\n        text: text,\n        locale: \"en-US\",\n        rate: 1\n      })\n    }\n  }\n\n  toggleVolume() {\n    this.volume = !this.volume;\n    this.storage.setItem('volume', this.volume);\n  }\n\n  sendText() {\n    let message = this.text;\n\n    if (!message) return;\n\n    this.showMessage(message);\n\n    window[\"ApiAIPlugin\"].requestText({\n      query: message\n    }, (response) => {\n      this.showApiMessage(response)\n    }, (error) => {\n      this.presentToast(\"Cannot connect to server\");\n      console.error(JSON.stringify(error));\n    });\n\n    this.text = \"\";\n  }\n\n  sendVoice() {\n    if (this.recording) {\n      this.recording = false;\n      window[\"ApiAIPlugin\"].cancelAllRequests();\n      return;\n    }\n    this.recording = true;\n    window[\"ApiAIPlugin\"].requestVoice({},\n      (response) => {\n        this.showMessage(StringUtils.capitalize(response.result.resolvedQuery));\n        this.showApiMessage(response)\n      },\n      (error) => {\n        this.ngZone.run(() => this.recording = false);\n        console.error(JSON.stringify(error));\n      });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts","export class StringUtils {\n\n  static capitalize(s: string) {\n    s = s.trim();\n    return s ? s[0].toUpperCase() + s.slice(1) : ''\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/utils/strings.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { ErrorHandler, NgModule } from '@angular/core';\nimport { IonicApp, IonicErrorHandler, IonicModule } from 'ionic-angular';\nimport { SplashScreen } from '@ionic-native/splash-screen';\nimport { StatusBar } from '@ionic-native/status-bar';\n\nimport { MyApp } from './app.component';\nimport { HomePage } from '../pages/home/home';\n\nimport { TextToSpeech } from '@ionic-native/text-to-speech';\nimport { StringUtils } from '../providers/utils/strings';\nimport { NativeStorage } from \"@ionic-native/native-storage\";\n\n@NgModule({\n  declarations: [\n    MyApp,\n    HomePage\n  ],\n  imports: [\n    BrowserModule,\n    IonicModule.forRoot(MyApp)\n  ],\n  bootstrap: [IonicApp],\n  entryComponents: [\n    MyApp,\n    HomePage\n  ],\n  providers: [\n    StatusBar,\n    SplashScreen,\n    TextToSpeech,\n    NativeStorage,\n    {provide: ErrorHandler, useClass: IonicErrorHandler},\n    StringUtils\n  ]\n})\nexport class AppModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component } from '@angular/core';\nimport { Platform } from 'ionic-angular';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\n\ndeclare const window;\n\nimport { HomePage } from '../pages/home/home';\n@Component({\n  templateUrl: 'app.html'\n})\nexport class MyApp {\n  rootPage:any = HomePage;\n\n  constructor(platform: Platform, statusBar: StatusBar, splashScreen: SplashScreen) {\n    platform.ready().then(() => {\n      // Okay, so the platform is ready and our plugins are available.\n      // Here you can do any higher level native things you might need.\n      statusBar.styleDefault();\n      splashScreen.hide();\n\n      window[\"ApiAIPlugin\"].init({\n          clientAccessToken: \"8268dd46704a48b0888c2418c6a4f8ed\", // insert your client access key here\n          lang: \"en\" // set lang tag from list of supported languages\n        }\n      );\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts"],"sourceRoot":""}